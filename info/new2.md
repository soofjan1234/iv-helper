## 为什么要加密
如果不加密，
NAS设备 → 云端: "给我发个访问码"
云端 → NAS: 返回 {accessID: "ABC123", accessVerify: "XYZ789", peerID: "peer001"}
中间人(如运营商、黑客)可以截获接头暗号，伪装成合法客户端连接你的NAS，你的私人数据(照片、文档)全部暴露

## 加密方式有哪些

### 1. 对称加密
用同一把钥匙开同一把锁，AES
1. 速度快(比RSA快100-1000倍)
2. 密钥分发困难，怎么安全的把密钥传给对方

### 2. 非对称加密
有两把钥匙，一把公钥，一把私钥。用公钥锁上的东西，只有对应的私钥能打开，RSA
1. 密钥分发简单
2. 速度慢、只能加密小数据(RSA-2048最多245字节)

### 3. 哈希算法
1. 正向极快，逆向极难：适合数据库存密码，用户一输入就知道对不对
2. 差之毫厘，谬以千里：适合文件校验，下载文件后对比哈希值

### 4. 数字签名
私钥加密，公钥解密
1. 消息哈希值 + 私钥加密 = 签名
2. 公钥解密签名,对比哈希值
3. 身份认证、防篡改、不可抵赖

### 5. 混合加密
1. RSA传输AES密钥,AES加密实际数据
2. 既快又安全

## 混合加密的方法
1. **生成密钥**：客户端生成 AES 的 `key` 和 `nonce`
2. **加密数据**：客户端用 AES 加密 `data`
3. **加密密钥**：客户端用 RSA 公钥加密 AES 的 `key`
4. **解密密钥**：服务端拿 RSA 私钥解密 `key`
5. **还原数据**：然后还原 `data`