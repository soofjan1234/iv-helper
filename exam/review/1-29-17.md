# 面试复盘报告

> 日期: 2026-01-29 17:30
> 题目数量: 20 道（Go 5题 + MySQL 3题 + Redis 3题 + 云端 3题 + NSQ 3题 + 技术无关 3题）

---

## 总体评价

- **得分**: 8.6/10
- **强项**: 
  - MVCC 和 ACID 理解透彻，表述清晰
  - Channel 使用场景非常全面
  - 穿透交互流程解释生动形象
  - MySQL执行流程比上次有明显进步
- **待提升**: 
  - 部分回答不完整（打洞原理、消息丢失场景）
  - 口误仍存在（竞态→静态）

---

## 逐题分析

### Go 部分

---

### 第 1 题: Go 语言的优点是什么？

📊 **评分**: B

**你的回答**:
> 支持并发，通过goroutine和channel实现协程并发，上手快，学习的东西比较少，性能好，支持自动垃圾回收，编译的包能够直接运行，二进制包体积比较小

**分析**:
- ✅ 四个核心优点都覆盖到了
- ✅ 提到了 goroutine 和 channel
- ❌ "学习的东西比较少"应该说"语法简洁，去除了复杂概念（如继承、泛型等）"

**参考答案**:
1. 天然支持高并发（goroutine + channel）
2. 学习成本低（语法简洁，去除复杂概念）
3. 性能高（编译后直接运行，无需虚拟机，GC优化）
4. 二进制包体积小（不依赖外部库）

**复习安排**: 2026-02-01

---

### 第 2 题: 切片是如何扩容的？什么时候触发扩容？

📊 **评分**: A

**你的回答**:
> 当长度大于容量时就要扩容，如果小于256就双倍扩容，大于的话平滑过渡到1.25倍扩容，还会进行内存对齐

**分析**:
- ✅ 触发条件正确
- ✅ 扩容算法正确
- ✅ 提到了内存对齐
- ❌ 可以补充：扩容后原数据会被复制到新内存空间

**复习安排**: 2026-02-03

---

### 第 3 题: Go Map 是并发安全的吗？为什么？

📊 **评分**: A

**你的回答**:
> 不是并发安全的，有竞态条件会并发修改的话，会触发panic map concurrent write，里面有个flag来记录是否有人在修改，要实现并发安全可以用sync.Map、sync.Mutex、sync.RWMutex

**分析**:
- ✅ 结论正确
- ✅ panic 信息正确
- ✅ flag 检测机制正确
- ✅ 这次主动提到了解决方案！进步明显！
- ❌ "静态条件"是口误，应该是"竞态条件"

**复习安排**: 2026-02-03

---

### 第 4 题: 什么是 GMP 模型？G、M、P 分别代表什么？

📊 **评分**: B

**你的回答**:
> 让go能够高效大量的使用go协程，G代表协程携带运行的上下文状态变量，M是线程用于具体运行协程，P代表调度器负责调度管理G

**分析**:
- ✅ G 和 M 的定义基本正确
- ❌ P 是 Processor（处理器），不是"调度器"
- ❌ 表述可以更清晰

**参考答案**:
- **G (Goroutine)**: 协程，包含执行上下文（栈、指令指针等）和调度状态
- **M (Machine)**: 操作系统线程，实际执行 G 的载体
- **P (Processor)**: 处理器，负责管理本地运行队列，决定哪些 G 被执行

**复习安排**: 2026-02-01

---

### 第 5 题: Channel 的使用场景有哪些？

📊 **评分**: A

**你的回答**:
> 传递数据、定时器、生产者消费者、控制并发、context取消、搭配select多路复用

**分析**:
- ✅ 数据传递
- ✅ 事件通知/定时器
- ✅ 生产者/消费者
- ✅ 限制并发数
- ✅ 任务取消（context）
- ✅ 多路复用（select）

**非常全面！** 完美覆盖了所有主要场景。

**复习安排**: 2026-02-01

---

### MySQL 部分

---

### 第 6 题: MySQL 执行流程是怎样的？

📊 **评分**: B

**你的回答**:
> 验证身份、查询缓存(MySQL8.0已取消)、词法分析、优化、查询、存储引擎

**分析**:
- ✅ 连接器（身份验证）
- ✅ 查询缓存（提到8.0移除）
- ✅ 分析器（词法分析）
- ✅ 优化器
- ✅ 存储引擎
- ❌ "查询"应该说"执行器"

**比上次进步了！** 6步都提到了，就是"执行器"说成了"查询"。

**参考答案**:
1. 连接器 - 身份认证和权限验证
2. 查询缓存（MySQL 8.0 已移除）
3. 分析器 - 词法分析、语法分析
4. 优化器 - 选择最优执行方案
5. **执行器** - 执行语句，返回结果
6. 存储引擎 - 数据存储和读取

**复习安排**: 2026-02-01

---

### 第 7 题: ACID 特性是什么？分别如何实现？

📊 **评分**: A

**你的回答**:
> A原子性用undo log，C一致性由其他三者保证，I隔离性由锁和MVCC保证，D持久性由redo log保证

**分析**:
- ✅ 四个特性都正确
- ✅ A、I、D 实现方式都正确
- ✅ C 的说法"由其他三者保证"也合理
- ✅ 这次没有口误了！

**复习安排**: 2026-02-03

---

### 第 8 题: MVCC 是什么？如何实现？

📊 **评分**: A

**你的回答**:
> MVCC是在不加锁或少加锁情况下保证数据并发读写，用undolog和readview实现，undolog保存修改记录用指针指向上一个，readview决定事务能看哪个记录，包含活跃事务ID、下一个分配的事务ID、最早活跃事务ID，可见性判断...

**分析**:
- ✅ 定义正确
- ✅ 实现机制正确
- ✅ ReadView 三个字段都提到了
- ✅ 可见性判断逻辑正确

**比上次更清晰了！**

**复习安排**: 2026-02-03

---

### Redis 部分

---

### 第 9 题: Redis 有哪些基本数据类型？分别适用于什么场景？

📊 **评分**: B

**你的回答**:
> String存储单个东西如验证码，Hash存储对象，List存储消息列表或动态列表，Set用于共同好友等去重场景，ZSet用于排行榜按分数排序，Stream用于消息流，HyperLogLog

**分析**:
- ✅ 7种数据类型都提到了
- ✅ 场景基本正确
- ❌ HyperLogLog 没有解释用途（大规模数据去重统计，如UV统计）
- ❌ List 问"能否排序？"显示不确定

**参考答案补充**:
- **HyperLogLog**: 极小内存估算不重复元素数量，适合UV统计
- **List**: 有序，适合消息队列、最新动态

**复习安排**: 2026-01-31

---

### 第 10 题: 什么是 SDS？相比 C 字符串有什么优点？

📊 **评分**: A

**你的回答**:
> SDS是Redis发明的字符串底层数组，结构是指针、已用空间、总容量。优势：直接获取长度不用遍历，能存储二进制流（用len知道长度而不是\0），拼接不会溢出

**分析**:
- ✅ 定义正确
- ✅ 结构：len、free、buf
- ✅ O(1) 获取长度
- ✅ 二进制安全
- ✅ 避免溢出（动态扩容）
- ❌ 可以补充：惰性空间释放

**复习安排**: 2026-02-01

---

### 第 11 题: 什么是缓存穿透？如何解决？

📊 **评分**: A

**你的回答**:
> 缓存穿透是Redis没有这个值，大量请求落到数据库。解决方法：缓存空值、布隆过滤器

**分析**:
- ✅ 定义正确
- ✅ 缓存空值
- ✅ 布隆过滤器

**复习安排**: 2026-02-01

---

### 云端/穿透 部分

---

### 第 12 题: 什么是穿透？为什么需要穿透技术？

📊 **评分**: A

**你的回答**:
> 穿透就是两个在不同网络的设备能互相访问。因为IP地址不够，一般都是一个公网IP下有多个设备（NAT技术）。内网设备能访问外网，但外网不知道怎么访问内网设备，所以需要穿透技术

**分析**:
- ✅ 定义清晰
- ✅ 解释了为什么需要（IP不够、NAT技术）
- ✅ 说明了问题所在（外网无法访问内网）

**复习安排**: 2026-02-01

---

### 第 13 题: 什么是打洞（Hole Punching）？原理是什么？

📊 **评分**: B

**你的回答**:
> 打洞就是两方得知对方的公网地址，就能进行通信。两端同时跟外面说我要出去，发过去的包在保安眼里肯定会有回包回来，然后发给信令服务器...

**分析**:
- ✅ 基本概念正确
- ❌ 回答不完整，没说完后续流程

**参考答案**:
1. 两边同时给公网服务器（信令服务器）发包，NAT会记录并等待回包
2. 公网服务器交换双方的公网地址
3. 两边同时向对方的公网地址发包，NAT认为是回包放行
4. 隧道打通，可以直接通信

**复习安排**: 2026-01-31

---

### 第 14 题: 云端、客户端、服务端、穿透端的交互流程是怎样的？

📊 **评分**: A

**你的回答**:
> 客户端开始穿透，服务端向云端要3个东西：身份证（peerID，用于开启穿透）、寻人启事（accessID，给用户看）、接头暗号（accessVerify，身份校验）。服务端用身份证开启穿透开房间等着。客户端根据寻人启事问云端服务端在哪和暗号，对上暗号就可以通信了

**分析**:
- ✅ 三个凭证解释得很清楚
- ✅ 流程描述完整
- ✅ 比喻生动形象

**非常好！** 这是你的项目，讲得很清楚。

**复习安排**: 2026-02-01

---

### NSQ 部分

---

### 第 15 题: 为什么要引入消息队列？有什么好处？

📊 **评分**: B

**你的回答**:
> 解耦（业务操作用事件记录不用等），用队列降低并发事件写入

**分析**:
- ✅ 解耦
- ✅ 削峰（用队列降低并发）
- ❌ 没有明确提到"异步"
- ❌ 表述有些简略

**参考答案**:
1. **解耦**: 业务操作和记录操作分离，不阻塞主流程
2. **异步**: 发消息后立即返回，下游异步处理
3. **削峰**: 请求突增时，消息先堆积，消费者按能力消化

**复习安排**: 2026-01-31

---

### 第 16 题: 为什么选择 NSQ 而不是 Kafka？

📊 **评分**: A

**你的回答**:
> Kafka比较重，不需要那么大吞吐量。NSQ简单轻量、配置容易、Go原生支持

**分析**:
- ✅ Kafka 太重
- ✅ 不需要高吞吐
- ✅ NSQ 简单轻量
- ✅ Go 原生支持

**复习安排**: 2026-02-01

---

### 第 17 题: NSQ 消息在什么情况下会丢失？如何减少丢失？

📊 **评分**: B

**你的回答**:
> 减少丢失：开启持久化，消费处理完毕再返回ok。重复消费：幂等或消息ID存数据库查是否消费过

**分析**:
- ✅ 解决方案正确：持久化、处理完再ACK
- ❌ 题目问的是"什么情况会丢失"，你没有回答
- ❌ 把消息丢失和重复消费混在一起了

**参考答案 - 丢失场景**:
1. **生产端**: 消息发出但 NSQ 未落盘就挂了
2. **NSQ 侧**: 默认内存存储，进程崩溃且没开持久化
3. **消费端**: 消费者拿到消息还没处理完就挂了

**复习安排**: 2026-01-31

---

### 技术无关 部分

---

### 第 18 题: 请做一个自我介绍

📊 **评分**: B

**你的回答**:
> 侯汶政，3年后端工程师，负责云端（交互和代码编写）、相册（人脸识别物体分类）、文件索引同步器（不同于FS.Notify）、文档中心（AI搜索），工作负责响应快

**分析**:
- ✅ 基本信息完整
- ✅ 项目介绍清晰
- ❌ "文件索引同步器不同于FS.Notify"说得不够清楚
- ❌ 可以突出项目价值和个人贡献

**复习安排**: 2026-02-01

---

### 第 19 题: 为什么想跳槽？

📊 **评分**: B

**你的回答**:
> 在这个公司里学到了很多技术知识，想到更大更有挑战的平台提升自己成长，兼顾work life balance

**分析**:
- ✅ 肯定了现公司收获
- ✅ 提到了更大平台
- ✅ 提到了 work life balance
- ❌ 可以更具体说明学到了什么（高并发处理等）

**复习安排**: 2026-02-01

---

### 第 20 题: 未来的职业规划是什么？

📊 **评分**: A

**你的回答**:
> 首先做一个靠谱的人，迅速熟悉业务，把工作做好，熟悉团队合作。然后做一个有影响力的人，深耕高并发分布式，能进行技术选型。后面可以往技术和管理方向发展

**分析**:
- ✅ 三个阶段清晰
- ✅ 初期：靠谱、熟悉业务、交付
- ✅ 中期：深耕技术、参与选型
- ✅ 后期：技术+管理

**比之前更完整了！**

**复习安排**: 2026-02-03

---

## 复习统计

- 本次答题: 20 道
- 评分分布: **A(9) B(11) C(0) D(0)**
- 已更新复习计划

| 评分 | 题目 |
|------|------|
| A | 切片扩容、Map并发安全、Channel场景、ACID、MVCC、SDS、缓存穿透、穿透概念、交互流程、NSQ vs Kafka、职业规划 |
| B | Go优点、GMP模型、MySQL执行流程、Redis数据类型、打洞原理、消息队列好处、消息丢失、自我介绍、跳槽原因 |

---

## 提升建议

1. **MySQL执行流程进步明显！** 继续巩固，把"查询"改成"执行器"
2. **回答要完整**: 打洞原理、消息丢失场景要说完整
3. **区分问题**: 消息丢失和重复消费是两个不同的问题，不要混在一起
4. **P 是 Processor**: GMP 中的 P 是处理器，不是调度器
5. **自我介绍可以更精炼**: 突出项目价值和个人贡献

---

## 本次亮点

1. **Map并发安全主动提到了解决方案** - 比上次进步！
2. **Channel使用场景非常全面** - 6个场景全覆盖
3. **穿透交互流程讲得很生动** - 你的项目优势
4. **ACID和MVCC表述清晰** - 没有口误了
