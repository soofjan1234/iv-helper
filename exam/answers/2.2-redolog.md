## 1. 为什么需要 Redo Log？

**问题**：InnoDB 将数据存在磁盘上，磁盘IO慢，故使用 Buffer Pool 缓存数据，提高读写效率。但如果 MySQL 宕机，Buffer Pool 中未刷盘的数据会丢失，**持久性无法保证**。

**解决**：引入 Redo Log，采用 **WAL（预写式日志）**：

- 修改数据时 → 先写 Redo Log，再更新 Buffer Pool
- 事务提交时 → 调用 fsync 刷盘
- MySQL 宕机 → 重启后读取 Redo Log 恢复数据

---

## 2. 为什么比直接刷脏快？

| 对比项 | 刷脏 | Redo Log |
| --- | --- | --- |
| IO 类型 | 随机 IO | 顺序 IO（追加写入） |
| 写入单位 | 整页（16KB） | 仅写入修改部分 |

---

## 3. Redo Log vs Binlog

| 对比项 | Redo Log | Binlog |
| --- | --- | --- |
| 作用 | Crash Recovery（崩溃恢复） | Point-in-time Recovery（时间点恢复） + 主从复制 |
| 层级 | InnoDB 引擎层 | Server 层（支持所有引擎） |
| 内容 | 物理日志（基于 Page） | 逻辑日志（SQL/数据/混合） |
| 写入时机 | 多元 | 事务提交时 |