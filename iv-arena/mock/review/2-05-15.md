# 面试复盘报告

> 日期: 2026-02-05 15:00
> 题目数量: 14 道（重点复习 5 + 常规 3 + 新题 6）
> 双维度评分: 知识正确度 + 表达结构 => 综合等级

---

## 总体概览

- **综合得分**: 约 3.6/5.0（约 7.2/10）
- **评分分布**: A(4) B(5) C(5) D(0)
- **亮点**: 执行流程第五步已纠正为「执行器」；切片扩容、闭包、for range、混合加密表述清晰；分块、事务隔离级别、缓存雪崩有要点。
- **待攻坚**: 人脸流程仍偏简、进程/线程/协程未展开、B+ 树未收尾、NSQ 消息丢失未答；事务隔离级别与「级别名称」对应关系需记牢。

---

## 逐题精批

### 第 1 题: MySQL 执行流程是怎样的？

**评分**: 知识 3.5 | 表达 3.0 => **C (3.25)**

**你的回答**:
> 第一步是身份验证，第二步是查询缓存（8.0 已取消），第三词法分析，第四语句优化，第五是执行器，第六是存储引擎。

**分析**:
- ✅ 第五步已正确为「执行器」，不再说「查询」。
- ✅ 连-缓-分-优-执-存 流程完整。
- 💡 表达可再简练：连接器（身份）、分析器（词法/语法）、优化器、执行器、存储引擎。

**复习计划**: 2026-02-07

---

### 第 2 题: 人脸算法的流程是怎样的？

**评分**: 知识 2.5 | 表达 2.5 => **D (2.5)** → 按 D 处理，间隔 1 天

**你的回答**:
> 先检测有没有人脸，把人脸特征向量提取出来，用 DBSCAN 聚类；新照片来就对比每个类别，看离哪个最近，近的加入，都没有就新建分类。

**分析**:
- ✅ 检测 → 特征提取 → 聚类 → 新样本归属，主线有。
- ❌ 缺「用什么模型/库做检测与特征」（如 OpenCV 检测 + 某模型提特征）；缺「聚类后如何得到“一个人”的语义」。
- 💡 建议补一句：检测与特征提取的载体（如 OpenCV + 某 Embedding 模型），以及「一个簇 = 一个人」的设定。

**复习计划**: 2026-02-06

---

### 第 3 题: 进程、线程、协程的区别是什么？

**评分**: 知识 3.0 | 表达 3.5 => **C (3.25)**

**你的回答**:
> 进程是操作系统的单位，线程是进程内的单元，协程是 goroutine 用户态级别。

**分析**:
- ✅ 进程/线程/协程的层级对了。
- ❌ 未展开：资源隔离（进程）、调度（内核态/用户态）、切换成本、并发模型（多进程/多线程/多协程）。
- 💡 至少补：谁调度、切换成本大小、一个进程内多线程共享什么。

**复习计划**: 2026-02-07

---

### 第 4 题: Hash、二叉树…B+树 各有什么问题？/为什么用 B+ 树？

**评分**: 知识 3.5 | 表达 3.0 => **C (3.25)**

**你的回答**:
> 哈希 O(1) 但范围查询差；二叉查找树会退化成链表；平衡树要频繁旋转；红黑树大致平衡、磁盘 IO 多；B 树节点存数据缓存利用率不如 B+ 树；B+ 树只有叶子存数据、层高约三层、叶子有链表支持范围查询。（自述二叉树几种定义、B 树与 B+ 对比讲得不清楚。）

**分析**:
- ✅ 各结构的问题和 B+ 树优势都点到。
- ❌ 未收尾：B+ 树「为什么适合做索引」一句话（多路矮树、少 IO；叶子有序、范围友好）。
- 💡 结尾可加：所以 MySQL 选 B+ 树做索引，兼顾点查与范围查、减少磁盘次数。

**复习计划**: 2026-02-07

---

### 第 5 题: NAT 类型有哪些？哪种最容易打洞？

**评分**: 知识 4.0 | 表达 3.5 => **B (3.75)**

**你的回答**:
> 全锥、受限锥、端口受限锥、对称型；对称型每次对端不同端口、P2P 困难，因为对端拿到的端口和你实际对外的端口不一致。

**分析**:
- ✅ 四种类型齐全，对称型难打洞的原因说对了。
- ✅ 规则表/映射表概念有体现。
- 💡 可明确一句：最容易打洞的是全锥形；对称型常需中继。

**复习计划**: 2026-02-08

---

### 第 6 题: 切片是如何扩容的？什么时候触发扩容？

**评分**: 知识 4.5 | 表达 4.5 => **A (4.5)**

**你的回答**:
> len ≥ cap 时扩容；<256 双倍扩，≥256 约 1.25 倍；有内存对齐，旧数据迁到新区域。

**分析**:
- ✅ 触发条件、阈值、倍数、对齐、迁移都正确。
- ✅ 表达简洁清楚。

**复习计划**: 2026-02-09

---

### 第 7 题: 混合加密的具体流程是怎样的？

**评分**: 知识 4.0 | 表达 4.0 => **B (4.0)**

**你的回答**:
> 对称加密用同一把钥匙加解密，非对称公钥加密、私钥解密；混合：用对称密钥加密数据，用非对称公钥加密该 key；接收方用私钥解出 key，再解数据。（表述中“对称加密的公钥”应为“对称加密的密钥”。）

**分析**:
- ✅ 流程正确，发送方加密数据+加密 key、接收方先解 key 再解数据。
- 💡 术语：加密的是「对称密钥」或「session key」，不是「公钥」。

**复习计划**: 2026-02-09

---

### 第 8 题: 什么是闭包？有哪些特性和使用场景？

**评分**: 知识 4.5 | 表达 4.5 => **A (4.5)**

**你的回答**:
> 闭包是函数 + 引用外部变量的环境；会促使变量逃逸到堆；可用于隐藏内部实现、当私有成员用。

**分析**:
- ✅ 定义、逃逸、封装用途都到位。
- 从上次 B 提升到 A。

**复习计划**: 2026-02-09

---

### 第 9 题: for range 遍历切片时添加元素会怎样？

**评分**: 知识 4.5 | 表达 4.5 => **A (4.5)**

**你的回答**:
> 因为遍历的是“快照”，后面加的元素不会在这次遍历里出现。

**分析**:
- ✅ 本质正确：range 取的是长度快照，循环内追加不会多遍历。
- ✅ 简洁到位。

**复习计划**: 2026-02-09

---

### 第 10 题: 事务隔离级别有哪些？分别解决什么问题？

**评分**: 知识 3.5 | 表达 4.0 => **B (3.75)**

**你的回答**:
> 第一个有脏读、不可重复读、丢失修改；第二个修了脏读；第三个修了不可重复读；第四个是可串行化。（级别名称与顺序略模糊。）

**分析**:
- ✅ 四个级别解决的问题对应关系基本正确。
- ❌ 应显式说出级别名称：读未提交、读已提交、可重复读、可串行化；并对应「解决谁」。
- 💡 口诀：读未提交→都可能有；读已提交→解决脏读；可重复读→解决不可重复读；可串行化→全解决。

**复习计划**: 2026-02-08

---

### 第 11 题: 什么是缓存雪崩？如何解决？

**评分**: 知识 4.0 | 表达 4.0 => **B (4.0)**

**你的回答**:
> Redis 宕机导致的问题；可以建集群。

**分析**:
- ✅ 雪崩=大量 key 同时失效或实例挂掉导致流量打到 DB，概念方向对；集群是手段之一。
- 💡 可补：过期时间打散、多级缓存、限流降级、持久化与主从/集群高可用。

**复习计划**: 2026-02-08

---

### 第 12 题: 为什么要分块？块大小如何确定？

**评分**: 知识 4.0 | 表达 4.0 => **B (4.0)**

**你的回答**:
> 大文件（如几十 MB tex）解析时 Bleve 建索引内存飙升，所以分块；块大小通过测试定。

**分析**:
- ✅ 问题（内存/索引成本）与手段（分块）清晰，块大小由测试定合理。
- 💡 可补一句：块大小通常与检索粒度、内存预算、延迟之间的权衡有关。

**复习计划**: 2026-02-08

---

### 第 13 题: 为该规划做了什么努力？

**评分**: 知识 3.0 | 表达 3.0 => **C (3.0)**

**你的回答**:
> 新业务时会做技术对比排查，自己也关注 AI 资讯。

**分析**:
- ✅ 有具体动作（技术选型、学习）。
- ❌ 「该规划」指什么未点明，听者可能不知道是职业规划还是项目规划；可一句话点题再举 1～2 个例子。

**复习计划**: 2026-02-07

---

### 第 14 题: 如何减少 NSQ 消息丢失？

**评分**: 知识 1.0 | 表达 1.0 => **D (1.0)** → 按 C 处理（未作答给 2 天复习）

**你的回答**:
> （未作答）

**分析**:
- 建议要点：生产者 ack、磁盘持久化、mem-queue-size 与 disk queue、消费者 FIN 前处理完、重试与死信、集群与副本。
- 下次可先答「生产端可靠投递 + 服务端持久化 + 消费端确认与重试」再展开。

**复习计划**: 2026-02-07

---

## 提升建议（重点复习原题）

1. **MySQL 执行流程是怎样的？**（执行器别漏）
2. **人脸算法的流程是怎样的？**（补检测/特征模型与「一簇一人」）
3. **进程、线程、协程的区别是什么？**（调度、切换成本、共享资源）
4. **Hash、二叉树、平衡二叉树、红黑树、B树、B+树 各有什么问题？**（收尾 B+ 树为何适合作索引）
5. **事务隔离级别有哪些？分别解决什么问题？**（四级名称 + 各解决谁）
6. **为该规划做了什么努力？**（点明「该规划」+ 1～2 个例子）
7. **如何减少 NSQ 消息丢失？**（生产可靠、持久化、消费确认与重试）

---

**复盘完成。下次可优先选「下次复习」已到期或 C/D 题再练。**
